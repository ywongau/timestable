(this.webpackJsonptimestable=this.webpackJsonptimestable||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(4),o=n.n(c),u=(n(10),n(1)),i=function(e){var t=Object(u.a)(e.question,3),n=t[0],c=t[1],o=t[2],i=e.onSubmit,s=Object(r.useState)(NaN),l=Object(u.a)(s,2),f=l[0],d=l[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),h=p[0],b=p[1],v=Object(r.useRef)(null),g=Object(r.useState)(new Date),j=Object(u.a)(g,2),O=j[0],S=j[1],E=Object(r.useState)(!1),y=Object(u.a)(E,2),N=y[0],w=y[1];return Object(r.useEffect)((function(){d(NaN),b(""),w(!1),S(new Date),v.current.focus()}),[n,c,o]),a.a.createElement("form",{"data-testid":"question-form",id:"question",onSubmit:function(e){if(e.preventDefault(),""!==h){var t=Number(h);d(t),i({correct:t===n*c,secondsSpent:parseInt((new Date-O)/1e3)}),w(!0)}}},a.a.createElement("span",null,n,"\xd7",c,"="),a.a.createElement("input",{maxLength:"2",ref:v,type:"text",pattern:"^\\d\\d?$",onChange:function(e){b(e.target.value)},value:h,readOnly:N}),isNaN(f)?null:a.a.createElement("span",{"data-testid":"result"},n*c===f?"\u2714\ufe0f":"\u274c"),a.a.createElement("p",{style:{visibility:n*c===f||isNaN(f)?"hidden":"visible"}},"Correct answer is ",n*c))},s=n(2),l=function(e){var t=e.onFilterChange,n=e.questionsWithScore,c=Object(r.useState)(NaN),o=Object(u.a)(c,2),i=o[0],l=o[1],f=function(e){var n=parseInt(e.target.value);l(n),t({filter:n})};return a.a.createElement("div",{id:"records"},a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:isNaN(i),name:"filter",onChange:f,value:""}),a.a.createElement("span",null,"all"))),n.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:i===e[0][0],name:"filter",onChange:f,value:e[0][0]}),a.a.createElement("span",null,e[0][0],"\xd7?")),e.map((function(e){var t=Object(u.a)(e,3),n=t[0],r=t[1],c=t[2];return a.a.createElement("span",{className:"wrapper",key:n+"-"+r},a.a.createElement("span",{key:n+"-"+r,className:["priority-".concat(c)].concat(Object(s.a)(isNaN(i)||n===i||r===i?[]:["disabled"])).join(" ")},n+"\xd7"+r))})))})))};n(11),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f,d,m=function(e){return new Promise((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=n}))},p=function(e){return function(t){return e.close(),t}},h=function(e,t){return Object(s.a)(Array(t-e+1).keys()).map((function(t){return e+t}))},b=function(){return h(2,9).map((function(e){return h(2,e).map((function(t){return[e,t]}))}))},v=function(e){var t=new SpeechSynthesisUtterance(e);t.voice=speechSynthesis.getVoices()[0],speechSynthesis.speak(t)},g=function(e){var t=function(t){var n=e.open(t);return n.onupgradeneeded=function(){n.result.createObjectStore("records",{keyPath:"id",autoIncrement:!0})},m(n)};return{addRecord:function(e){return t("records").then(function(e){return function(t){return m(t.transaction("records","readwrite").objectStore("records").put(e)).then(p(t))}}(e))},getRecords:function(){return t("records").then((function(e){return m(e.transaction("records").objectStore("records").getAll()).then(p(e))}))},deleteRecords:function(){return m(e.deleteDatabase("records"))}}}(indexedDB),j=(f=function(e){var t=function(e,t,n){var r=n.filter((function(n){return n.x===e&&n.y===t})).sort((function(e,t){return t.id-e.id})).slice(0,5);return 0===r.length?0:r.every((function(e){return!e.correct}))?1:r.every((function(e){return e.correct}))?r.every((function(e){return e.correct}))?function(e){var t,n=(t=e.map((function(e){return e.secondsSpent}))).reduce((function(e,t){return e+t}),0)/t.length;return n>20?3:n>10?4:n>5?5:6}(r):void 0:2};return{range:h,getAllQuestions:b,getQuestion:function(n,r){var a=b().flat(),c=isNaN(r)?a:a.filter((function(e){return e[0]===r||e[1]===r})),o=c.map((function(e){var r=Object(u.a)(e,2),a=r[0],c=r[1];return[a,c,t(a,c,n)]})).filter((function(e){return e[2]<6}));if(0===o.length)return c[Math.floor(e()*c.length)];var i=o.filter((function(e){return 0===e[2]}));return console.warn({unanswerQuestions:i}),i.length>0?i[Math.floor(e()*i.length)]:(console.warn(o),o.sort((function(e,t){return e[2]-t[2]}))[Math.floor(function(t,n,r,a){var c=e()*(n-t)+t,o=e()*a;return c*(1-o)+r*o}(0,o.length,0,.7))])},getScore:t,speak:v}}(Math.random),d=g,function(){var e=Object(r.useState)([0,0]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),s=Object(u.a)(o,2),m=s[0],p=s[1],h=Object(r.useState)(NaN),b=Object(u.a)(h,2),v=b[0],g=b[1],j=Object(u.a)(n,2),O=j[0],S=j[1];return Object(r.useEffect)((function(){d.getRecords().then((function(e){p(e);var t=f.getQuestion(e,v);c(t||[0,0])}))}),[v]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i,{question:n,onSubmit:function(e){var t=e.correct,n=e.secondsSpent,r=(new Date).valueOf(),a={correct:t,x:O,y:S,secondsSpent:n,ts:r};f.speak(t?"correct":"".concat(O," times ").concat(S," equals ").concat(O*S)),d.addRecord(a).then((function(){return d.getRecords()})).then((function(e){p(e),setTimeout((function(){var t=f.getQuestion(e,v),n=Object(u.a)(t,2),r=n[0],a=n[1];c([r,a,Math.random()])}),500)}))}}),a.a.createElement(l,{onFilterChange:function(e){var t=e.filter;g(t)},questionsWithScore:f.getAllQuestions().map((function(e){return e.map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return[n,r,f.getScore(n,r,m)]}))}))}),a.a.createElement("button",{onClick:function(){return d.deleteRecords().then((function(){p([]),c(f.getQuestion([],v))}))}},"Delete records"))});o.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.cf627c81.chunk.js.map