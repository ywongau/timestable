(this.webpackJsonptimestable=this.webpackJsonptimestable||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),o=n.n(c),u=(n(12),n(1)),i=function(e){var t=Object(u.a)(e.question,3),n=t[0],c=t[1],o=t[2],i=e.onSubmit,s=Object(r.useState)(NaN),l=Object(u.a)(s,2),f=l[0],d=l[1],m=Object(r.useState)(""),h=Object(u.a)(m,2),p=h[0],b=h[1],v=Object(r.useRef)(null),g=Object(r.useState)(new Date),j=Object(u.a)(g,2),O=j[0],S=j[1],N=Object(r.useState)(!1),y=Object(u.a)(N,2),E=y[0],w=y[1];return Object(r.useEffect)((function(){d(NaN),b(""),w(!1),S(new Date),v.current.focus()}),[n,c,o]),a.a.createElement("form",{"data-testid":"question-form",id:"question",onSubmit:function(e){if(e.preventDefault(),""!==p){var t=Number(p);d(t),i({correct:t===n*c,secondsSpent:parseInt((new Date-O)/1e3)}),w(!0)}}},a.a.createElement("span",null,n,"\xd7",c,"="),a.a.createElement("input",{maxLength:"2",ref:v,type:"text",pattern:"^\\d\\d?$",onChange:function(e){b(e.target.value)},value:p,readOnly:E}),isNaN(f)?null:a.a.createElement("span",{"data-testid":"result"},n*c===f?"\u2714\ufe0f":"\u274c"),a.a.createElement("p",{style:{visibility:n*c===f||isNaN(f)?"hidden":"visible"}},"Correct answer is ",n*c))},s=n(4),l=function(e){var t=e.onFilterChange,n=e.questionsWithScore,c=Object(r.useState)(NaN),o=Object(u.a)(c,2),i=o[0],l=o[1],f=function(e){var n=parseInt(e.target.value);l(n),t({filter:n})};return a.a.createElement("div",{id:"records"},a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:isNaN(i),name:"filter",onChange:f,value:""}),a.a.createElement("span",null,"all"))),n.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:i===e[0][0],name:"filter",onChange:f,value:e[0][0]}),a.a.createElement("span",null,e[0][0],"\xd7?")),e.map((function(e){var t=Object(u.a)(e,3),n=t[0],r=t[1],c=t[2];return a.a.createElement("span",{className:"wrapper",key:n+"-"+r},a.a.createElement("span",{key:n+"-"+r,className:["priority-".concat(c)].concat(Object(s.a)(isNaN(i)||n===i||r===i?[]:["disabled"])).join(" ")},n+"\xd7"+r))})))})))};n(13),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f,d,m=function(e){return new Promise((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=n}))},h=function(e){return function(t){return e.close(),t}},p=function(e,t){return Object(s.a)(Array(t-e+1).keys()).map((function(t){return e+t}))},b=function(){return p(2,9).map((function(e){return p(2,e).map((function(t){return[e,t]}))}))},v=function(e){var t=new SpeechSynthesisUtterance(e);t.voice=speechSynthesis.getVoices()[0],speechSynthesis.speak(t)},g=function(e){var t=function(t){var n=e.open(t);return n.onupgradeneeded=function(){n.result.createObjectStore("records",{keyPath:"id",autoIncrement:!0})},m(n)};return{addRecord:function(e){return t("records").then(function(e){return function(t){return m(t.transaction("records","readwrite").objectStore("records").put(e)).then(h(t))}}(e))},getRecords:function(){return t("records").then((function(e){return m(e.transaction("records").objectStore("records").getAll()).then(h(e))}))},deleteRecords:function(){return m(e.deleteDatabase("records"))}}}(indexedDB),j=(f=function(e,t){var n=function(e,n,r){var a=r.filter((function(t){return t.x===e&&t.y===n})).sort((function(e,t){return t.id-e.id})).filter((function(e){return e.ts>t()-864e6}));return 0===a.length?NaN:a.length>=5&&a.every((function(e){return e.correct}))?100:a.every((function(e){return e.correct}))?75:a.reduce((function(e,n){var r=(864e6-(t()-n.ts))/864e6;return e+(n.correct?n.secondsSpent<=10?20:10:-50)*r}),0)},r=function(e){return isNaN(e)?0:e<0?1:e<25?2:e<50?3:e<75?4:e<100?5:6};return{range:p,getAllQuestions:b,getQuestion:function(t,a){var c=b().flat(),o=isNaN(a)?c:c.filter((function(e){return e[0]===a||e[1]===a})),i=o.map((function(e){var a=Object(u.a)(e,2),c=a[0],o=a[1];return[c,o,r(n(c,o,t))]})).filter((function(e){return e[2]<6}));if(0===i.length)return console.warn({notMasteredQuestions:i}),o[Math.floor(e()*o.length)];var s=i.filter((function(e){return 0===e[2]}));return console.warn({unanswerQuestions:s,notMasteredQuestions:i}),s.length>0?s[Math.floor(e()*s.length)]:i.sort((function(e,t){return e[2]-t[2]}))[Math.floor(function(t,n,r,a){var c=e()*(n-t)+t,o=e()*a;return c*(1-o)+r*o}(0,i.length,0,.7))]},getScore:n,speak:v,scoreToPriority:r}}(Math.random,(function(){return new Date})),d=g,function(){var e=Object(r.useState)([0,0]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),s=Object(u.a)(o,2),m=s[0],h=s[1],p=Object(r.useState)(NaN),b=Object(u.a)(p,2),v=b[0],g=b[1],j=Object(u.a)(n,2),O=j[0],S=j[1];return Object(r.useEffect)((function(){d.getRecords().then((function(e){h(e);var t=f.getQuestion(e,v);c(t||[0,0])}))}),[v]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i,{question:n,onSubmit:function(e){var t=e.correct,n=e.secondsSpent,r=(new Date).valueOf(),a={correct:t,x:O,y:S,secondsSpent:n,ts:r};f.speak(t?"correct":"".concat(O," times ").concat(S," equals ").concat(O*S)),d.addRecord(a).then((function(){return d.getRecords()})).then((function(e){h(e),setTimeout((function(){var t=f.getQuestion(e,v),n=Object(u.a)(t,2),r=n[0],a=n[1];c([r,a,Math.random()])}),500)}))}}),a.a.createElement(l,{onFilterChange:function(e){var t=e.filter;g(t)},questionsWithScore:f.getAllQuestions().map((function(e){return e.map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return[n,r,f.scoreToPriority(f.getScore(n,r,m))]}))}))}),a.a.createElement("button",{onClick:function(){return d.deleteRecords().then((function(){h([]),c(f.getQuestion([],v))}))}},"Delete records"))});o.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.dba5603d.chunk.js.map