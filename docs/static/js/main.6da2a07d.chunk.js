(this.webpackJsonptimestable=this.webpackJsonptimestable||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(4),o=n.n(c),u=(n(10),n(1));n(11),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,s,l=function(e){return new Promise((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=n}))},f=function(e){return function(t){return e.close(),t}},d=n(2),m=function(e,t){return Object(d.a)(Array(t-e+1).keys()).map((function(t){return e+t}))},v=function(){return m(2,9).map((function(e){return m(2,e).map((function(t){return[e,t]}))}))},h=function(e){var t=new SpeechSynthesisUtterance(e);t.voice=speechSynthesis.getVoices()[0],speechSynthesis.speak(t)},p=function(e){var t=function(t){var n=e.open(t);return n.onupgradeneeded=function(){n.result.createObjectStore("records",{keyPath:"id",autoIncrement:!0})},l(n)};return{addRecord:function(e){return t("records").then(function(e){return function(t){return l(t.transaction("records","readwrite").objectStore("records").put(e)).then(f(t))}}(e))},getRecords:function(){return t("records").then((function(e){return l(e.transaction("records").objectStore("records").getAll()).then(f(e))}))},deleteRecords:function(){return l(e.deleteDatabase("records"))}}}(indexedDB),b=(i=function(e){var t=function(e,t,n){var r=n.filter((function(n){return n.x===e&&n.y===t})).sort((function(e,t){return t.id-e.id})).slice(0,5);return 0===r.length?0:r.every((function(e){return!e.correct}))?1:r.every((function(e){return e.correct}))?r.every((function(e){return e.correct}))?function(e){var t,n=(t=e.map((function(e){return e.secondsSpent}))).reduce((function(e,t){return e+t}),0)/t.length;return n>20?3:n>10?4:n>5?5:6}(r):void 0:2};return{range:m,shuffle:function(t){var n=t.slice();return m(0,t.length-1).forEach((function(t){var r=Math.floor(e()*(t+1)),a=[n[r],n[t]];n[t]=a[0],n[r]=a[1]})),n},getAllQuestions:v,getQuestion:function(n,r){var a=v().flat().map((function(e){var r=Object(u.a)(e,2),a=r[0],c=r[1];return[a,c,t(a,c,n)]})).filter((function(e){return e[2]<6&&(isNaN(r)||e[0]===r||e[1]===r)})),c=a.reduce((function(e,t){return e[t[2]]=[].concat(Object(d.a)(e[t[2]]),[[t[0],t[1]]]),e}),[[],[],[],[],[],[],[]])[0];return c.length>0?c[Math.floor(e()*c.length)]:a.sort((function(e,t){return e[2]-t[2]}))[Math.floor(function(t,n,r,a){var c=e()*(n-t)+t,o=e()*a;return c*(1-o)+r*o}(0,a.length,0,1))]},getScore:t,speak:h}}(Math.random),s=p,function(){var e=Object(r.useState)([0,0]),t=Object(u.a)(e,2),n=Object(u.a)(t[0],2),c=n[0],o=n[1],l=t[1],f=Object(r.useState)(NaN),d=Object(u.a)(f,2),m=d[0],v=d[1],h=Object(r.useState)(""),p=Object(u.a)(h,2),b=p[0],g=p[1],j=Object(r.useState)(new Date),y=Object(u.a)(j,2),O=y[0],E=y[1],S=Object(r.useState)(!1),w=Object(u.a)(S,2),N=w[0],k=w[1],D=Object(r.useState)([]),R=Object(u.a)(D,2),Q=R[0],x=R[1],C=Object(r.useState)(NaN),A=Object(u.a)(C,2),I=A[0],M=A[1],q=Object(r.useRef)(null),B=function(e){var t=parseInt(e.target.value);M(t),l(i.getQuestion(Q,t)||[0,0])};return Object(r.useEffect)((function(){s.getRecords().then((function(e){x(e),function(e){var t=i.getQuestion(e,I);l(t||[0,0]),q.current.focus()}(e)}))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{"data-testid":"question",style:{visibility:0===c?"hidden":"visible"},id:"question",onSubmit:function(e){if(""===b||N)e.preventDefault();else{var t=Number(b);v(t);var n=parseInt((new Date-O)/1e3),r=t===c*o,a=(new Date).valueOf(),u={correct:r,x:c,y:o,secondsSpent:n,ts:a};i.speak(r?"correct":"".concat(c," times ").concat(o," equals ").concat(c*o)),s.addRecord(u).then((function(){return s.getRecords()})).then((function(e){x(e),setTimeout((function(){l(i.getQuestion(e,I)||[0,0]),v(NaN),g(""),E(new Date),k(!1)}),r?500:5e3)})),k(!0),e.preventDefault()}}},"".concat(c,"\xd7").concat(o,"="),a.a.createElement("input",{ref:q,readOnly:N,min:"1",max:"99",type:"number",onChange:function(e){g(e.target.value)},value:b}),isNaN(m)?null:a.a.createElement("span",{"data-testid":"result"},c*o===m?"\u2714\ufe0f":"\u274c"),a.a.createElement("div",{id:"correct-answer",style:{visibility:N?"visible":"hidden"}},"Correct answer is ",c*o)),a.a.createElement("div",{id:"records"},a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:isNaN(I),name:"focus",onChange:B,value:""}),a.a.createElement("span",null,"all"))),i.getAllQuestions().map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:I===e[0][0],name:"focus",onChange:B,value:e[0][0]}),a.a.createElement("span",null,e[0][0],"\xd7? ")),e.map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return a.a.createElement("span",{className:"wrapper"},a.a.createElement("span",{key:n+"-"+r,className:"priority-".concat(i.getScore(n,r,Q)," ").concat(isNaN(I)||n===I||r===I?"":"disabled")},n+"\xd7"+r))})))}))),a.a.createElement("button",{onClick:function(){return s.deleteRecords().then((function(){x([]),l(i.getQuestion([],I)||[0,0])}))}},"Delete records"))});o.a.render(a.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.6da2a07d.chunk.js.map